{% extends "layout.html" %}
{% block content %}
Old Link: <a id='OldLink' href="{{ original_url }}">{{ original_url }}</a>
<br />
New Link: <a id='NewLink' href="{{ url_for('app.redirect_to_url', short_url=new_link, _external = True) }}">
    {{ url_for('app.redirect_to_url', short_url=new_link, _external = True) }}
</a>

<br>
        
<canvas id="qr-code"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>

    var qrtext = document.getElementById("NewLink").textContent;
    var qr;
    (function() {
        qr = new QRious({
        element: document.getElementById('qr-code'),
        foreground: 'black',
        size: 200,
        value: qrtext,
        });
    })();
</script>
        {% if current_user %}
          <div>
            <button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deleteModal">Delete</button>
          </div>
        {% endif %}
  <!-- Modal -->
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete Link?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
          <form action="{{ url_for('app.delete_link', link_id=link.id) }}" method="POST">
            <input class="btn btn-danger" type="submit" value="Delete">
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock content%}